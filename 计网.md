# 计网
### 1. TLS四次握手？
- 客户端发出请求（ClientHello）
首先，客户端（通常是浏览器）先向服务器发出加密通信的请求，这被叫做ClientHello请求。
在这一步，客户端主要向服务器提供以下信息。
    - 支持的协议版本，比如TLS 1.0版。
    - 一个客户端生成的随机数，稍后用于生成"对话密钥"。
    - 支持的加密方法，比如RSA公钥加密。
    - 支持的压缩方法。
- 服务器回应（SeverHello）
    - 确认使用的加密通信协议版本，比如TLS 1.0版本。如果浏览器与服务器支持的版本不一致，服务器关闭加密通信。
    - 确认使用的加密方法，比如RSA公钥加密，返回加密公钥
    - 服务器证书
- 客户端回应
    -验证证书的合法性（颁发证书的机构是否合法，证书中包含的网站地址是否与正在访问的地址一致等），如果证书受信任，则浏览器栏里面会显示一个小锁头，否则会给出证书不受信的提示。
    - 如果证书受信任，或者是用户接受了不受信的证书，浏览器会生成一串随机数的密码，并用证书中提供的公钥加密。
    - 使用约定好的HASH计算握手消息，并使用生成的随机数对消息进行加密，最后将之前生成的所有信息发送给网站。
- 服务器
    - 使用自己的私钥将信息解密取出密码，使用密码解密浏览器发来的握手消息，并验证HASH是否与浏览器发来的一致。
    - 使用密码加密一段握手消息，发送给浏览器。

### 2. TCP Keep_alive长连接机制？
TCP长连接下，若长时间客户端和服务器没有数据往来，可能是其中一方断开了连接，而其中另一方一直维持长连接，会造成系统资源的浪费以及可能导致下一次连接出错。Keep alive机制是指，当长时间没有数据往来时，其中维持连接的一方会发送一个探测包，如连接仍正常，仍需维持连接。
